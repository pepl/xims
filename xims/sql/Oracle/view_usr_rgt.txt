-- Copyright (c) 2002-2004 The XIMS Project.
-- See the file "LICENSE" for information on usage and redistribution
-- of this file, and for a DISCLAIMER OF ALL WARRANTIES.
-- $Id$
CREATE OR REPLACE VIEW ci_users_roles (
   id,
   object_type,
   name,
   lastname,
   middlename,
   firstname,
   enabled,
   email,
   url,
   password,
   system_privs_mask )
AS
SELECT id, utype, name, last_name, middle_name, first_name, CASE WHEN enabled='Y' THEN 1 ELSE 0 END, 
email, url, current_pwd, sys_privs_mask
                FROM C10200.SEC$USERS
                WITH READ ONLY
/
CREATE OR REPLACE VIEW ci_roles_granted (
   id,
   grantor_id,
   grantee_id,
   role_master,
   default_role )
AS
SELECT privilege_id, sec$usr_grantor_id, sec$usr_grantee_id, CASE WHEN admin='Y' THEN 1 ELSE 0 END, CASE WHEN default_role='Y' THEN 1 ELSE 0 END
                FROM SEC$PRIVS_GRANTED WHERE privilege_id >= 0
                WITH READ ONLY
/
