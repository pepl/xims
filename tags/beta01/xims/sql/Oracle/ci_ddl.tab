-- Copyright (c) 2002-2003 The XIMS Project.
-- See the file "LICENSE" for information on usage and redistribution
-- of this file, and for a DISCLAIMER OF ALL WARRANTIES.
-- $Id$

PROMPT Creating Table 'CI_USERS_ROLES'
DROP TABLE CI_USERS_ROLES CASCADE CONSTRAINTS;
CREATE TABLE CI_USERS_ROLES
 (PASSWORD VARCHAR2(32)
 ,ENABLED NUMBER(1,0)
 ,ADMIN NUMBER(1,0)
 ,ID NUMBER(6,0) NOT NULL
 ,SYSTEM_PRIVS_MASK NUMBER(32,0) NOT NULL
 ,NAME VARCHAR2(30) NOT NULL
 ,LASTNAME VARCHAR2(30) NOT NULL
 ,MIDDLENAME VARCHAR2(30)
 ,FIRSTNAME VARCHAR2(30)
 ,EMAIL VARCHAR2(80)
 ,URL VARCHAR2(250)
 ,OBJECT_TYPE NUMBER(1,0) NOT NULL
 )
/

COMMENT ON COLUMN CI_USERS_ROLES.OBJECT_TYPE IS '0 => user, 1 => role'
/

PROMPT Creating Table 'CI_ROLES_GRANTED'
DROP TABLE CI_ROLES_GRANTED;
CREATE TABLE CI_ROLES_GRANTED
 (ID NUMBER NOT NULL
 ,GRANTOR_ID NUMBER NOT NULL
 ,GRANTEE_ID NUMBER NOT NULL
 ,ROLE_MASTER NUMBER(1,0)
 ,DEFAULT_ROLE NUMBER(1,0)
 )
/

COMMENT ON COLUMN CI_ROLES_GRANTED.ROLE_MASTER IS 'if 1, grantee has the right to manage role-membership of this role'
/
COMMENT ON COLUMN CI_ROLES_GRANTED.DEFAULT_ROLE IS 'will be used to specify the roles granted which are granted VIEW priv in setDefaultGrants'
/

PROMPT Creating Table 'CI_OBJECT_PRIVS_GRANTED'
DROP TABLE CI_OBJECT_PRIVS_GRANTED;
CREATE TABLE CI_OBJECT_PRIVS_GRANTED
 (PRIVILEGE_MASK NUMBER(32,0) NOT NULL
 ,GRANTEE_ID NUMBER NOT NULL
 ,GRANTOR_ID NUMBER NOT NULL
 ,CONTENT_ID NUMBER NOT NULL
 )
/

PROMPT Creating Table 'CI_DOCUMENTS'
DROP TABLE CI_DOCUMENTS CASCADE CONSTRAINTS;
CREATE TABLE CI_DOCUMENTS
 (LOCATION VARCHAR2(256)
 ,STATUS VARCHAR2(100)
 ,ID NUMBER NOT NULL
 ,PARENT_ID NUMBER NOT NULL
 ,OBJECT_TYPE_ID NUMBER NOT NULL
 ,DEPARTMENT_ID NUMBER DEFAULT 1
 ,DATA_FORMAT_ID NUMBER
 ,SYMNAME_TO_DOC_ID NUMBER
 ,POSITION NUMBER
 ,LFT NUMBER
 ,RGT NUMBER
 )
 STORAGE
 (
      INITIAL     1024000
      NEXT        1024000
      PCTINCREASE 0
      MINEXTENTS  1
      MAXEXTENTS  121
 )

/
COMMENT ON COLUMN CI_DOCUMENTS.POSITION IS 'For positioning in the parent_id container-context'
/

PROMPT Creating Table 'CI_CONTENT'
DROP TABLE CI_CONTENT CASCADE CONSTRAINTS;
CREATE TABLE CI_CONTENT
 (BINFILE BLOB
 ,LAST_MODIFICATION_TIMESTAMP DATE DEFAULT SYSDATE NOT NULL
 ,NOTES VARCHAR2(1000)
 ,MARKED_NEW NUMBER(1,0)
 ,ID NUMBER NOT NULL
 ,LOCKED_TIME DATE  -- should be LOCKED_TIMESTAMP !!!
 ,ABSTRACT VARCHAR2(2000)
 ,BODY CLOB
 ,TITLE VARCHAR2(200) NOT NULL
 ,KEYWORDS VARCHAR2(200)
 ,FILENAME_EXTERNAL VARCHAR2(512)
 ,STATUS VARCHAR2(100)
 ,CREATION_TIMESTAMP DATE DEFAULT SYSDATE NOT NULL
 ,ATTRIBUTES VARCHAR2(256)
 ,LOCKED_BY_ID NUMBER
 ,STYLE_ID NUMBER
 ,SCRIPT_ID NUMBER
 ,LANGUAGE_ID NUMBER
 ,LAST_MODIFIED_BY_ID NUMBER NOT NULL
 ,OWNED_BY_ID NUMBER NOT NULL
 ,CREATED_BY_ID NUMBER NOT NULL
 ,CSS_ID NUMBER
 ,IMAGE_ID NUMBER
 ,DOCUMENT_ID NUMBER NOT NULL
 ,PUBLISHED NUMBER(1,0)
 ,LAST_PUBLICATION_TIMESTAMP DATE
 ,LAST_PUBLISHED_BY_ID NUMBER
 ,MARKED_DELETED NUMBER(1,0)
 )
 PCTFREE    10
 PCTUSED    40
 INITRANS   1
 MAXTRANS   255
 STORAGE
 (
  INITIAL     10240000
  NEXT        10240000
  PCTINCREASE 0
  MINEXTENTS  1
  MAXEXTENTS  121
 )
/

COMMENT ON COLUMN CI_CONTENT.KEYWORDS IS 'values ";"-separated'
/

PROMPT Creating Table 'CI_DATA_FORMATS'
DROP TABLE CI_DATA_FORMATS CASCADE CONSTRAINTS;
CREATE TABLE CI_DATA_FORMATS
 (MIME_TYPE VARCHAR2(40) NOT NULL
 ,ID NUMBER NOT NULL
 ,NAME VARCHAR2(40) NOT NULL
 ,SUFFIX VARCHAR2(5)
 )
/

PROMPT Creating Table 'CI_LANGUAGES'
DROP TABLE CI_LANGUAGES CASCADE CONSTRAINTS;
CREATE TABLE CI_LANGUAGES
 (ID NUMBER NOT NULL
 ,CODE VARCHAR2(6) NOT NULL
 ,FULLNAME VARCHAR2(40) NOT NULL
 )
/

COMMENT ON COLUMN CI_LANGUAGES.CODE IS 'values: IANA-codes'
/

PROMPT Creating Table 'CI_OBJECT_TYPES'
DROP TABLE CI_OBJECT_TYPES CASCADE CONSTRAINTS;
CREATE TABLE CI_OBJECT_TYPES
 (ID NUMBER NOT NULL
 ,NAME VARCHAR2(40) NOT NULL
 ,IS_FS_CONTAINER NUMBER(1,0)
 ,IS_XIMS_DATA NUMBER(1,0)
 ,REDIR_TO_SELF NUMBER(1,0)
 )
/

COMMENT ON COLUMN CI_OBJECT_TYPES.IS_FS_CONTAINER IS 'IS_FS_CONTAINER indicates whether this object-type should be exported as folder to te filesystem'

COMMENT ON COLUMN CI_OBJECT_TYPES.REDIR_TO_SELF IS 'REDIR_TO_SELF indicates whether redirection after editing should go to the object self or to the parent object'
